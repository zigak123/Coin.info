var app=angular.module("coinTicker",["ngMaterial","infinite-scroll","ui.router","ngAnimate","ngMessages","ngImgCrop","ngFileUpload"]);app.value("THROTTLE_MILLISECONDS",2e3),app.config(["$mdThemingProvider","$stateProvider","$urlRouterProvider","$mdInkRippleProvider","$mdProgressCircularProvider","$mdAriaProvider",function(e,n,t,a,r,i){r.configure({progressSize:40}),i.disableWarnings(),e.theme("default").primaryPalette("blue").accentPalette("pink"),e.theme("darkDefault").primaryPalette("blue").accentPalette("purple").dark(),e.alwaysWatchTheme(!0),e.enableBrowserColor({theme:"default",palette:"primary",hue:"800"});n.state({name:"signedin",url:"/user/{userId}",component:"userDetails",resolve:{userStatus:["userSrv",function(e){return e.authenticated({username:!0,avatarImage:!0})}]}}),n.state({name:"login",url:"/login",component:"login"}),n.state({name:"coinDetails",url:"/{coinName}",component:"coinDetails",params:{coin_data:null}}),n.state({name:"profile",url:"/profile",component:"profile"}),n.state({name:"about",url:"/about",templateUrl:"/public/dist/templates/about.html"}),n.state({name:"news",url:"/news",component:"news"}),n.state({name:"coinlist",url:"/",component:"coinlist"}),t.otherwise("/")}]),app.directive("priceChangeLabel",function(){return{restrict:"E",scope:{priceInfo:"=info"},template:'<div layout="row" align="end">                    <md-icon style="height: 24px; margin-left: 0px; margin-right: 0px" md-svg-src={{price_arrow}}></md-icon>                      <span class="md-caption" ng-style="style"> {{temp}} % </span>              </div>',link:function(e,t,a){function r(){n=e.priceInfo.length,e.temp=1<e.priceInfo[n-1]/e.priceInfo[n-31]?e.priceInfo[n-1]/e.priceInfo[n-31]-1:-1*(1-e.priceInfo[n-1]/e.priceInfo[n-31]),e.temp=numeral(100*e.temp).format("0,0.00"),e.temp<0?(e.price_arrow="public/dist/images/arrow_drop.svg",e.style={color:"red"}):(e.price_arrow="public/dist/images/arrow_up.svg",e.style={color:"limegreen"})}e.$watch("priceInfo",function(e,n){e!=n&&r()}),r()}}}),app.directive("sl",["$timeout","$window","dataSrv",function(e,n,s){return{link:function(t,e,a){var r=e=d3.select(e[0]),i=t.priceData,l=void 0!==a.min?+a.min:d3.min(i),c=void 0!==a.max?+a.max:d3.max(i);e.text("");var o=a.r||0,p=o;r.node().clientWidth,r.attr({width:64,height:18});var m=d3.scale.linear().domain([0,i.length-1]).range([p,64-p]),u=d3.scale.linear().domain([l,c]).range([18-p,p]);r.append("path").data(i).attr("d","M"+i.map(function(e,n){return[m(n),u(e)]}).join("L")),r.selectAll("circle").data(i).enter().append("circle").attr("r",o).attr("cx",function(e,n){return m(n)}).attr("cy",function(e){return u(e)}),t.$watch("priceData",function(e,n){e!=n&&(i=t.priceData,t.coinSymbol==s.getCurrency()&&(i=Array.apply(null,Array(30)).map(Number.prototype.valueOf,0)),r.selectAll("circle").remove(),r.selectAll("path").remove(),l=void 0!==a.min?+a.min:d3.min(i),c=void 0!==a.max?+a.max:d3.max(i),m=d3.scale.linear().domain([0,i.length-1]).range([p,64-p]),u=d3.scale.linear().domain([l,c]).range([18-p,p]),r.append("path").data(i).attr("d","M"+i.map(function(e,n){return[m(n),u(e)]}).join("L")),r.selectAll("circle").data(i).enter().append("circle").attr("r",o).attr("cx",function(e,n){return m(n)}).attr("cy",function(e){return u(e)}))})},restrict:"E",replace:!0,template:'<svg ng-transclude class="sl"></svg>',transclude:!0,scope:{priceData:"=data",coinSymbol:"=symbol"}}}]),app.directive("imageCheck",["$rootScope",function(a){return{scope:!1,link:function(e,n,t){(null==e.article.image||jQuery.isEmptyObject(e.article.image))&&(e.article.image="default"==a.currentTheme?"public/dist/images/baseline_broken_image_black_48dp.png":"public/dist/images/baseline_broken_image_white_48dp.png"),n.bind("error",function(){e.article.image="default"==a.currentTheme?"public/dist/images/baseline_broken_image_black_48dp.png":"public/dist/images/baseline_broken_image_white_48dp.png"}),n.bind("load",function(){n.removeClass("imageLoad")}),a.$watch("currentTheme",function(){"public"==e.article.image.split("/")[0]&&(e.article.image="default"==a.currentTheme?"public/dist/images/baseline_broken_image_black_48dp.png":"public/dist/images/baseline_broken_image_white_48dp.png")})}}}]),app.directive("titleClamp",function(){return{link:function(e,n,t){$clamp(n[0],{clamp:3,useNativeClamp:!0})}}}),app.directive("userMenu",function(){return{templateUrl:"public/dist/templates/userMenu.template.html"}}),app.directive("infiniteScrollFix",["$window",function(t){return{restrict:"A",link:function(e,n){n.on("scroll",function(e){t.dispatchEvent(new Event("scroll"))})}}}]);