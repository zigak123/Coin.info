app.factory("dataSrv",["$http","$q",function(u,o){var i=[],t="USD",r=t,a=function(n,t,r){var u=[];angular.forEach(n,function(t){var n=c(t,r).then(function(n){t.lineData=n});u.push(n)}),o.all(u).then(function(){t(i=n)})},c=function(n,t){return u({method:"GET",url:"https://min-api.cryptocompare.com/data/histoday?fsym="+n.Symbol+"&tsym="+t+"&limit=30"}).then(function(n){return n.data.Data.map(function(n){return n.close})},function(n){return n})},e=function(n,t,r){u.get("coinlist?skip="+n).then(function(n){a(n.data,t,r)})};return{getCoins:function(n,t){0==i.length?e(0,n,t):a(i,n,t)},setCurrency:function(n){r=t,t=n},getCurrency:function(){return t},getPrevious:function(){return r}}}]);