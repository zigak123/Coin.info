app.component("news",{controller:["$scope","$http","$state","userSrv","$rootScope","$timeout","$mdMedia","$location","$anchorScroll",function(l,o,t,e,i,n,a,c,r){l.showFAB=!1,l.isbusy=!0,l.page=1,l.favoriteIcon="public/dist/images/ic_favorite_border_black_24px.svg",l.articles=[],l.isSmall=a("xs"),l.$watch(function(){return a("xs")},function(e){l.isSmall=e}),e.authenticated({articles:!0}).then(function(e){l.likedArticlesDict={};for(var t=0;t<e.length;t++)l.likedArticlesDict[e[t]]=!0},function(e){}),l.LoadArticles=function(){l.isbusy=!0,o.get("news?page="+l.page).then(function(e){if(void 0===e.data||null===e.data)throw new Error("bad response from newsAPI: "+e.data.message);angular.forEach(e.data,function(e){var t=new Date,l=new Date(e.publishedAt);l-=36e5;var o=Math.floor((t-l)/1e3),i=Math.floor(o/60),n=Math.floor(i/60),a=Math.floor(n/24);o=o-24*a*60*60-60*(n-=24*a)*60-60*(i=i-24*a*60-60*n),i=0<i?i+" min ":"",n=0<n?n+" h ":"",a=0<a?a+" d ":"",e.publishedAt=a+n+i}),[].push.apply(l.articles,e.data)}).then(function(){l.isbusy=!1,l.page+=1})},l.scrollTop=function(){a("gt-xs")?$("#pageContent").animate({scrollTop:0},.025*angular.element("#pageContent").scrollTop()):$("body, html, #pageContent").scrollTop(0)},l.readArticle=function(e){t.go("article",{articleName:e.title,article:e})},l.setIcon=function(e){return l.likedArticlesDict&&l.likedArticlesDict[e.title]?"public/dist/images/ic_favorite_black_24px.svg":"public/dist/images/ic_favorite_border_black_24px.svg"},l.likeArticle=function(e){var t;l.likedArticlesDict&&(delete e.image,e.title in l.likedArticlesDict?(t="/delete",delete l.likedArticlesDict[e.title]):(t="/save",l.likedArticlesDict[e.title]=!0),o({method:"POST",url:t,data:e}).then(function(e){console.log("articles updated in mongoDB")}))};var s=function(){0<angular.element("#pageContent").scrollTop()?(l.showFAB=!0,l.$apply()):0==angular.element("#pageContent").scrollTop()&&(l.showFAB=!1,l.$apply())};l.$on("$destroy",function(){angular.element("#pageContent").off("scroll",s)}),angular.element("#pageContent").on("scroll",s),n(function(){l.LoadArticles(!1)},350)}],templateUrl:"/public/dist/templates/coinNews.html"});